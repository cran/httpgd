(()=>{"use strict";var t={900:(t,e,n)=>{t.exports=n.p+"103f47f4ae284eb62b37.svg"}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t="http://";function e(t){var e=new Headers;return t.token&&e.set("X-HTTPGD-TOKEN",t.token),e}function i(t,n){return i=this,o=void 0,s=function(){return function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(i){switch(i.label){case 0:return[4,fetch(n,{headers:e(t)})];case 1:return[4,i.sent().json()];case 2:return[2,i.sent()]}}))},new((r=void 0)||(r=Promise))((function(t,e){function n(t){try{h(s.next(t))}catch(t){e(t)}}function a(t){try{h(s.throw(t))}catch(t){e(t)}}function h(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(n,a)}h((s=s.apply(i,o||[])).next())}));var i,o,r,s}var o=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{h(i.next(t))}catch(t){r(t)}}function a(t){try{h(i.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}h((i=i.apply(t,e||[])).next())}))},r=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function s(t){var e=document.getElementById(t);if(!e)throw new ReferenceError(t+" is not defined");return e}function a(t,e,n){var i=document.createElement("a");i.href=t,e&&(i.download=e),n&&(i.target="_blank"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}function h(t,e){var n=document.createElement("canvas");n.style.display="none",document.body.appendChild(n);var i=t.getBoundingClientRect();n.width=i.width,n.height=i.height;var o=n.getContext("2d");o&&(o.drawImage(t,0,0,n.width,n.height),e(n).finally((function(){return document.body.removeChild(n)})))}var l=function(){function t(){this.fun=[]}return t.prototype.notify=function(t){for(var e=0;e<this.fun.length;++e)this.fun[e](t,this.oldState);this.oldState=t},t.prototype.subscribe=function(t){this.fun.push(t)},t}();function c(t,e,n){var i=t.value;if(!i.match(/^\d+$/))return!1;var o=parseInt(i);return o>=e&&o<=n}function u(t,e,n){return e?t.classList.add(n):t.classList.remove(n),e}var d="scrollBehavior"in document.documentElement.style,p=function(){function e(t,e){this.mode=0,this.pausePoll=!1,this.disconnected=!1,this.remoteStateChanged=new l,this.connectionChanged=new l,this.backend=t,this.allowWebsockets=e||!1}return e.prototype.open=function(){0==this.mode&&this.start(3)},e.prototype.close=function(){0!=this.mode&&this.start(0)},e.prototype.start=function(t){var n,i=this;if(this.mode!=t)switch(t){case 1:this.clearWebsocket(),this.clearPoll(),this.pollHandle=setInterval((function(){return i.poll()}),e.INTERVAL_POLL),this.mode=t;break;case 2:this.clearWebsocket(),this.clearPoll(),this.pollHandle=setInterval((function(){return i.poll()}),e.INTERVAL_POLL_SLOW),this.mode=t;break;case 3:if(!this.allowWebsockets){this.start(1);break}this.clearPoll(),this.clearWebsocket(),this.socket=(n=this.backend,new WebSocket(function(t){return"ws://"+t.host}(n))),this.socket.onmessage=function(t){return i.onWsMessage(t.data)},this.socket.onopen=function(){return i.onWsOpen()},this.socket.onclose=function(){return i.onWsClose()},this.socket.onerror=function(){return i.start(2)},this.mode=t,this.poll();break;case 0:this.clearWebsocket(),this.clearPoll(),this.mode=t}},e.prototype.clearPoll=function(){this.pollHandle&&clearInterval(this.pollHandle)},e.prototype.clearWebsocket=function(){this.socket&&(this.socket.onclose=function(){},this.socket.close())},e.prototype.poll=function(){var e,n=this;this.pausePoll||(e=this.backend,i(e,function(e){return t+e.host+"/state"}(e))).catch((function(t){throw t})).then((function(t){n.setDisconnected(!1),2===n.mode&&n.start(3),n.pausePoll||n.checkState(t)})).catch((function(){n.setDisconnected(!0),2!==n.mode&&n.start(2)}))},e.prototype.onWsMessage=function(t){if(t.startsWith("{")){var e=JSON.parse(t);this.checkState(e)}else console.log("Unknown WS message: "+t)},e.prototype.onWsClose=function(){this.setDisconnected(!0)},e.prototype.onWsOpen=function(){this.setDisconnected(!1)},e.prototype.setDisconnected=function(t){this.disconnected!=t&&(this.disconnected=t,this.disconnected?this.start(2):this.start(3),this.connectionChanged.notify(t))},e.prototype.checkState=function(t){this.lastState&&this.lastState.active===t.active&&this.lastState.hsize===t.hsize&&this.lastState.upid===t.upid||(this.lastState=t,this.remoteStateChanged.notify(t))},e.prototype.onRemoteChange=function(t){this.remoteStateChanged.subscribe(t)},e.prototype.onConnectionChange=function(t){this.connectionChanged.subscribe(t)},e.INTERVAL_POLL=500,e.INTERVAL_POLL_SLOW=15e3,e}(),f=function(){function e(t,e,n){var i=this;this.plotsChanged=new l,this.deviceActiveChanged=new l,this.data={},this.backend={host:t,token:e},this.connection=new p(this.backend,n),this.connection.onRemoteChange((function(t,e){return i.remoteStateChanged(t,e)}))}return e.prototype.connect=function(){return this.connection.open(),this.updateRenderers()},e.prototype.onConnectionChange=function(t){this.connection.onConnectionChange(t)},e.prototype.remoteStateChanged=function(t,e){e&&e.hsize===t.hsize&&e.upid===t.upid||this.updatePlots(),e&&e.active==t.active||this.deviceActiveChanged.notify(t.active)},e.prototype.localStateChanged=function(t){var e;this.remoteStateChanged(t,null===(e=this.data.plots)||void 0===e?void 0:e.state)},e.prototype.updateRenderers=function(){var e,n=this;return(e=this.backend,i(e,function(e){return t+e.host+"/renderers"}(e))).then((function(t){n.data.renderers=t}))},e.prototype.updatePlots=function(){var e,n=this;(e=this.backend,i(e,function(e){return t+e.host+"/plots"}(e))).then((function(t){n.data.plots=t,n.plotsChanged.notify(t)}))},e.prototype.getPlots=function(){return this.data.plots?this.data.plots.plots:[]},e.prototype.getRenderers=function(){return this.data.renderers?this.data.renderers.renderers:[]},e.prototype.getPlotURL=function(e){return this.data.plots?function(e,n,i,o){var r=new URL(t+e.host+"/plot");return n.id&&r.searchParams.append("id",n.id),n.renderer&&r.searchParams.append("renderer",n.renderer),n.width&&r.searchParams.append("width",Math.round(n.width).toString()),n.height&&r.searchParams.append("height",Math.round(n.height).toString()),n.zoom&&r.searchParams.append("zoom",n.zoom.toString()),n.download&&r.searchParams.append("download",n.download),i&&e.token&&r.searchParams.append("token",e.token),o&&r.searchParams.append("c",o),r.href}(this.backend,e,!0,this.data.plots.state.upid.toString()):void 0},e.prototype.onPlotsChanged=function(t){this.plotsChanged.subscribe(t)},e.prototype.onDeviceActiveChanged=function(t){this.deviceActiveChanged.subscribe(t)},e.prototype.removePlot=function(e){var n=this;(function(e,n){return i(e,function(e,n){var i=new URL(t+e.host+"/remove");return i.searchParams.append("id",n.id),i.href}(e,n))})(this.backend,e).then((function(t){return n.localStateChanged(t)}))},e.prototype.clearPlots=function(){var e,n=this;(e=this.backend,i(e,function(e){return t+e.host+"/clear"}(e))).then((function(t){return n.localStateChanged(t)}))},e}(),g=n(900),v=function(){function t(t){var e=this;this.viewer=t,this.elemModal=s("exp-modal"),this.imgPreview=s("exp-image"),this.inputWidth=s("ie-width"),this.inputHeight=s("ie-height"),this.inputZoom=s("ie-scale"),this.btnOpen=s("ie-btn-open"),this.btnDownload=s("ie-btn-download"),this.selectFormat=s("ie-format"),this.btnClose=s("exp-modal-close"),this.btnClose.onclick=function(){return e.hide()},window.onmousedown=function(t){t.target==e.elemModal&&e.hide()},this.inputWidth.addEventListener("input",(function(){return e.update()})),this.inputHeight.addEventListener("input",(function(){return e.update()})),this.inputZoom.addEventListener("input",(function(){return e.update()})),this.btnDownload.onclick=function(){return e.clickDownload()},this.btnOpen.onclick=function(){return e.clickOpen()}}return t.prototype.initRenderers=function(){var t=this;this.renderers=this.viewer.httpgd.getRenderers(),this.renderers.sort((function(t,e){return function(t,e){return t<e?-1:t>e?1:0}(t.name,e.name)})).forEach((function(e){var n=document.createElement("option");n.value=e.id,n.text=e.name+" (*"+e.ext+")",t.selectFormat.add(n)})),this.selectFormat.value="svg"},t.prototype.hide=function(){this.elemModal.style.display="none"},t.prototype.isVisible=function(){return this.elemModal.style.display&&"none"!==this.elemModal.style.display},t.prototype.validWidth=function(){return c(this.inputWidth,t.MIN_PREVIEW_SIZE,t.MAX_PREVIEW_SIZE)},t.prototype.getWidth=function(){return Math.min(parseInt(this.inputWidth.value),t.MAX_PREVIEW_SIZE)},t.prototype.validHeight=function(){return c(this.inputHeight,t.MIN_PREVIEW_SIZE,t.MAX_PREVIEW_SIZE)},t.prototype.getHeight=function(){return Math.min(parseInt(this.inputHeight.value),t.MAX_PREVIEW_SIZE)},t.prototype.validZoom=function(){return c(this.inputZoom,t.MIN_PREVIEW_ZOOM,t.MAX_PREVIEW_ZOOM)},t.prototype.getZoom=function(){return Math.max(parseInt(this.inputZoom.value)/100,t.MIN_PREVIEW_ZOOM)},t.prototype.getRenderer=function(){var t=this;return this.viewer.httpgd.getRenderers().find((function(e){return e.id==t.selectFormat.value}))},t.prototype.clickDownload=function(){var t=this.viewer.plotView.getCurrentPlotId();if(t){var e=this.getRenderer();a(this.viewer.httpgd.getPlotURL({width:this.getWidth(),height:this.getHeight(),zoom:this.getZoom(),id:t,renderer:e.id,download:"plot_"+t+e.ext}))}},t.prototype.clickOpen=function(){var t=this.viewer.plotView.getCurrentPlotId();if(t){var e=this.getRenderer();a(this.viewer.httpgd.getPlotURL({width:this.getWidth(),height:this.getHeight(),zoom:this.getZoom(),id:t,renderer:e.id}),null,!0)}},t.prototype.update=function(){if(!(u(this.inputWidth,!this.validWidth(),"invalid-input")||u(this.inputHeight,!this.validHeight(),"invalid-input")||u(this.inputZoom,!this.validZoom(),"invalid-input"))){var t=this.viewer.plotView.getCurrentPlotId();if(t){var e=this.viewer.httpgd.getPlotURL({width:this.getWidth(),height:this.getHeight(),zoom:this.getZoom(),id:t});this.imgPreview.src=e}else this.imgPreview.src=g}},t.prototype.show=function(){this.elemModal.style.display="block",this.update()},t.MIN_PREVIEW_SIZE=1,t.MAX_PREVIEW_SIZE=1e4,t.MIN_PREVIEW_ZOOM=.01,t.MAX_PREVIEW_ZOOM=1e4,t}(),m=function(){function t(t){this.viewer=t,this.overlayContainer=s("overlay"),this.overlayText=s("overlay-text")}return t.prototype.show=function(t){this.overlayText.innerText=t,this.overlayContainer.style.display="inline"},t.prototype.hide=function(){this.overlayContainer.style.display="none"},t.TEXT_CONNECTION_LOST="Connection lost.",t.TEXT_DEVICE_INACTIVE="Device inactive.",t}(),w=function(){function t(e){var n=this;this.viewer=e,this.dropdown=s("tb-more").parentElement,this.dropdown.onmouseenter=function(){return n.showDropdown()},this.dropdown.onmouseleave=function(){return n.hideDropdown()},this.zoomLabel=s("tb-zlvl"),this.pageLabel=s("tb-pnum"),this.elemToolbar=s("toolbar"),this.elemContainer=s("container"),this.timoutFade=setTimeout((function(){return n.fadeOut()}),t.DELAY_FADE_OUT),this.elemContainer.onmousemove=function(){n.elemToolbar.classList.remove("fade-out"),clearTimeout(n.timoutFade),n.timoutFade=setTimeout((function(){return n.fadeOut()}),t.DELAY_FADE_OUT)},this.elemContainer.onmouseleave=function(){return n.fadeOut()}}return t.prototype.registerActions=function(t){for(var e=this,n={},i=function(t){if(s(t.id).onclick=function(){t.f(),e.hideDropdown()},t.keys)for(var i=0,o=t.keys;i<o.length;i++){var r=o[i];n[r]=t}},o=0,r=t;o<r.length;o++)i(r[o]);window.addEventListener("keydown",(function(t){if(!e.viewer.exportView.isVisible()){var i=n[t.keyCode];return!i||i.altKey&&!t.altKey?void 0:(i.f(),void t.preventDefault())}}))},t.prototype.showDropdown=function(){this.dropdown.classList.add(t.CSS_SHOW_DROPDOWN)},t.prototype.hideDropdown=function(){this.dropdown.classList.remove(t.CSS_SHOW_DROPDOWN)},t.prototype.setZoomLabelText=function(t){this.zoomLabel.childNodes[0].nodeValue=t},t.prototype.setPageLabelText=function(t){this.pageLabel.childNodes[0].nodeValue=t},t.prototype.fadeOut=function(){this.elemToolbar.classList.add("fade-out")},t.DELAY_FADE_OUT=4e3,t.CSS_SHOW_DROPDOWN="drop-open",t}(),y=function(){function t(t,e){var n=this;this.viewer=t,this.elemPlotView=s("plotview"),this.elemSidebar=s("sidebar"),e&&(this.elemSidebar.classList.add("notransition","nohist"),this.elemPlotView.classList.add("notransition","nohist"),setTimeout((function(){n.elemSidebar.classList.remove("notransition"),n.elemPlotView.classList.remove("notransition")}),300))}return t.prototype.update=function(t){for(var e=this,n=0;n<this.elemSidebar.children.length;)n>=t.plots.length||this.elemSidebar.children[n].getAttribute("data-pid")!==t.plots[n].id?this.elemSidebar.removeChild(this.elemSidebar.children[n]):n++;for(var i=function(){var i=t.plots[n],r=document.createElement("div");r.setAttribute("data-pid",i.id);var s=document.createElement("a");s.innerHTML="&#10006;",s.onclick=function(){e.viewer.httpgd.removePlot({id:i.id}),e.viewer.httpgd.updatePlots()};var a=document.createElement("img");r.classList.add("history-item"),a.setAttribute("src",o.viewer.httpgd.getPlotURL({id:i.id})),r.onclick=function(){return e.viewer.plotView.setPage(i.id)},r.appendChild(a),r.appendChild(s),o.elemSidebar.appendChild(r)},o=this;n<t.plots.length;++n)i()},t.prototype.setSelected=function(t){for(var e,n,i,o=0;o<this.elemSidebar.children.length;++o){var r=this.elemSidebar.children[o];r.getAttribute("data-pid")===t?(r.classList.add("history-selected"),e=r):r.classList.remove("history-selected")}if(e){var s=e.getBoundingClientRect(),a=s.y+this.elemSidebar.scrollTop,h=s.height,l=a-(this.elemSidebar.getBoundingClientRect().height/2-h/2);n=this.elemSidebar,i={top:l,behavior:"smooth"},d?n.scrollTo(i):n.scrollTo(i.left?i.left:0,i.top?i.top:0)}},t.prototype.toggle=function(){var t=this;this.elemSidebar.classList.toggle("nohist"),this.elemPlotView.classList.toggle("nohist"),setTimeout((function(){return t.viewer.plotView.update()}),300)},t.prototype.hideWithoutAnimation=function(){var t=this;this.elemSidebar.classList.add("notransition","nohist"),this.elemPlotView.classList.add("notransition","nohist"),this.viewer.plotView.update(),setTimeout((function(){t.elemSidebar.classList.remove("notransition"),t.elemPlotView.classList.remove("notransition")}),300)},t}(),b=function(){function t(e,n){var i=this;this.resizeBlocked=!1,this.scale=t.SCALE_DEFAULT,this.page=1,this.viewer=e,this.toolbar=new w(e),this.sidebar=new y(e,n),this.image=s("drawing"),this.image.src=g,window.addEventListener("resize",(function(){return i.resize()}))}return t.prototype.updatePlots=function(t){this.plots=t,this.page=t.plots.length,this.updatePageLabel(),this.sidebar.update(t)},t.prototype.getCurrentPlotId=function(){if(!this.plots||0==this.plots.plots.length)return null;for(;this.page<1;)this.page+=this.plots.plots.length;for(;this.page>this.plots.plots.length;)this.page-=this.plots.plots.length;return this.plots.plots[this.page-1].id},t.prototype.update=function(){if(this.plots&&0!=this.plots.plots.length){var t=this.getCurrentPlotId(),e=this.image.getBoundingClientRect(),n=this.viewer.httpgd.getPlotURL({id:t,width:e.width,height:e.height,zoom:this.scale});n&&(this.image.src=n),this.updatePageLabel(),this.sidebar.setSelected(t)}else this.image.src=g},t.prototype.resize=function(){var e=this;this.resizeBlocked||(this.resizeBlocked=!0,setTimeout((function(){e.update(),e.resizeBlocked=!1}),t.COOLDOWN_RESIZE))},t.prototype.zoomOut=function(){this.scale-t.SCALE_STEP>t.SCALE_MIN&&(this.scale-=t.SCALE_STEP),this.updateZoomLabel(),this.resize()},t.prototype.zoomIn=function(){this.scale+=t.SCALE_STEP,this.updateZoomLabel(),this.resize()},t.prototype.zoomReset=function(){this.scale=t.SCALE_DEFAULT,this.updateZoomLabel(),this.resize()},t.prototype.getZoomString=function(){return Math.ceil(this.scale/t.SCALE_DEFAULT*100)+"%"},t.prototype.updateZoomLabel=function(){this.toolbar.setZoomLabelText(this.getZoomString())},t.prototype.nextPage=function(){this.page++,this.update()},t.prototype.prevPage=function(){this.page--,this.update()},t.prototype.newestPage=function(){this.plots&&this.page!=this.plots.plots.length&&(this.page=this.plots.plots.length,this.update())},t.prototype.setPage=function(t){if(this.plots)for(var e=0;e<this.plots.plots.length;++e)if(this.plots.plots[e].id===t)return this.page=e+1,void this.update()},t.prototype.getPageString=function(){return this.plots?this.page+"/"+this.plots.plots.length:"0/0"},t.prototype.updatePageLabel=function(){this.toolbar.setPageLabelText(this.getPageString())},t.prototype.downloadSVG=function(){var t;t=this.image,fetch(t.src).then((function(t){return t.blob()})).then((function(t){a(URL.createObjectURL(t),"plot.svg")}))},t.prototype.downloadPNG=function(){!function(t,e){var n=this;h(t,(function(t){return o(n,void 0,void 0,(function(){return r(this,(function(e){return a(t.toDataURL("image/png").replace("image/png","image/octet-stream"),"plot.png"),[2]}))}))}))}(this.image)},t.prototype.copyPNG=function(){!function(t){var e,n=this;(null===(e=navigator.clipboard)||void 0===e?void 0:e.write)?h(t,(function(t){return o(n,void 0,void 0,(function(){var e;return r(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(e){return t.toBlob(e)}))];case 1:return(e=n.sent())?[4,navigator.clipboard.write([new ClipboardItem(Object.defineProperty({},e.type,{value:e,enumerable:!0}))])]:[2];case 2:return[2,n.sent()]}}))}))})):console.warn("No clipboard API support!")}(this.image)},t.prototype.removePlot=function(){this.viewer.httpgd.removePlot({id:this.getCurrentPlotId()})},t.prototype.clearPlots=function(){this.viewer.httpgd.clearPlots()},t.COOLDOWN_RESIZE=200,t.SCALE_DEFAULT=1.25,t.SCALE_STEP=t.SCALE_DEFAULT/12,t.SCALE_MIN=.5,t}(),E=function(){function t(t,e,n,i){var o=this;this.sidebarHidden=!1,this.httpgd=new f(t,e,n),i&&(this.sidebarHidden=!0),this.httpgd.onPlotsChanged((function(t){return o.plotsChanged(t)})),this.httpgd.onConnectionChange((function(t){return o.connectionChanged(t)})),this.httpgd.onDeviceActiveChanged((function(t){return o.deviceActiveChanged(t)}))}return t.prototype.plotsChanged=function(t){var e,n;null===(e=this.plotView)||void 0===e||e.updatePlots(t),null===(n=this.plotView)||void 0===n||n.update()},t.prototype.connectionChanged=function(t){var e,n;t?null===(e=this.overlayView)||void 0===e||e.show(m.TEXT_CONNECTION_LOST):null===(n=this.overlayView)||void 0===n||n.hide()},t.prototype.deviceActiveChanged=function(e){var n,i=this;this.deviceInactiveDelayed&&clearTimeout(this.deviceInactiveDelayed),e?null===(n=this.overlayView)||void 0===n||n.hide():this.deviceInactiveDelayed=setTimeout((function(){var t;return null===(t=i.overlayView)||void 0===t?void 0:t.show(m.TEXT_DEVICE_INACTIVE)}),t.COOLDOWN_DEVICE_INACTIVE)},t.prototype.init=function(){var t=this;this.plotView=new b(this,this.sidebarHidden),this.overlayView=new m(this),this.exportView=new v(this),this.httpgd.connect().then((function(){t.exportView.initRenderers()})),this.plotView.toolbar.registerActions([{keys:[37,40],f:function(){return t.plotView.prevPage()},id:"tb-left"},{keys:[39,38],f:function(){return t.plotView.nextPage()},id:"tb-right"},{keys:[78],f:function(){return t.plotView.newestPage()},id:"tb-pnum"},{keys:[187],f:function(){return t.plotView.zoomIn()},id:"tb-plus"},{keys:[189],f:function(){return t.plotView.zoomOut()},id:"tb-minus"},{keys:[48],f:function(){return t.plotView.zoomReset()},id:"tb-zlvl"},{id:"tb-clear",altKey:!0,keys:[68],f:function(){return t.plotView.clearPlots()}},{id:"tb-remove",keys:[46,68],f:function(){return t.plotView.removePlot()}},{id:"tb-save-svg",keys:[83],f:function(){return t.plotView.downloadSVG()}},{id:"tb-save-png",keys:[80],f:function(){return t.plotView.downloadPNG()}},{id:"tb-copy-png",keys:[67],f:function(){return t.plotView.copyPNG()}},{id:"tb-history",keys:[72],f:function(){return t.plotView.sidebar.toggle()}},{id:"tb-export",keys:[69],f:function(){return t.exportView.show()}}])},t.COOLDOWN_DEVICE_INACTIVE=1e3,t}(),P=new URL(window.location.href).searchParams;const C={viewer:new E(P.get("host")||window.location.host,P.get("token")||void 0,!P.has("ws")||"0"!=P.get("ws"),!!P.has("sidebar")&&"0"==P.get("sidebar"))};window.onload=function(){C.viewer.init()}})()})();